{"ast":null,"code":"import decode from 'jwt-decode'; // store jowtoken locally\n\nconst setToken = token => {\n  localStorage.setItem('store_token_id', token);\n}; // Retrun the jwtoken from local storage\n\n\nconst getToken = () => localStorage.getItem('store_token_id'); // check if the token is expired\n\n\nconst isTokenExpired = token => {\n  try {\n    const _info = decode(token);\n\n    if (_info.exp < Date.now() / 1000) {\n      return true;\n    } else return false;\n  } catch (error) {\n    return false;\n  }\n}; // check login status\n\n\nconst isLogin = () => {\n  var status = false;\n  const jwt = getToken();\n\n  if (jwt != null) {\n    if (!isTokenExpired(jwt)) status = true;\n  }\n\n  ;\n  return status;\n}; // return a list of all users\n\n\nconst getUser = () => {\n  if (isLogin()) {\n    const jwt = getToken();\n    const user = decode(jwt);\n    return user;\n  } else {\n    return {};\n  }\n}; // remove the jwtoken stored locally\n\n\nconst logOut = () => {\n  localStorage.removeItem('store_token_id');\n};\n\nglobal.auth = {\n  setToken,\n  getUser,\n  logOut\n};","map":{"version":3,"sources":["/home/eric/Desktop/CMPT276/CMPT276/server/public/src/commons/auth.js"],"names":["decode","setToken","token","localStorage","setItem","getToken","getItem","isTokenExpired","_info","exp","Date","now","error","isLogin","status","jwt","getUser","user","logOut","removeItem","global","auth"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,YAAnB,C,CAEA;;AACA,MAAMC,QAAQ,GAAGC,KAAK,IAAI;AACtBC,EAAAA,YAAY,CAACC,OAAb,CAAqB,gBAArB,EAAuCF,KAAvC;AACH,CAFD,C,CAIA;;;AACA,MAAMG,QAAQ,GAAG,MACbF,YAAY,CAACG,OAAb,CAAqB,gBAArB,CADJ,C,CAIA;;;AACA,MAAMC,cAAc,GAAGL,KAAK,IAAI;AAC5B,MAAI;AACA,UAAMM,KAAK,GAAGR,MAAM,CAACE,KAAD,CAApB;;AACA,QAAIM,KAAK,CAACC,GAAN,GAAYC,IAAI,CAACC,GAAL,KAAa,IAA7B,EAAmC;AAC/B,aAAO,IAAP;AACH,KAFD,MAEO,OAAO,KAAP;AACV,GALD,CAKE,OAAOC,KAAP,EAAc;AACZ,WAAO,KAAP;AACH;AACJ,CATD,C,CAWA;;;AACA,MAAMC,OAAO,GAAG,MAAM;AAClB,MAAIC,MAAM,GAAG,KAAb;AACA,QAAMC,GAAG,GAAGV,QAAQ,EAApB;;AACA,MAAIU,GAAG,IAAI,IAAX,EAAiB;AACb,QAAI,CAACR,cAAc,CAACQ,GAAD,CAAnB,EAA0BD,MAAM,GAAG,IAAT;AAC7B;;AAAA;AACD,SAAOA,MAAP;AACH,CAPD,C,CASA;;;AACA,MAAME,OAAO,GAAG,MAAM;AAClB,MAAGH,OAAO,EAAV,EAAc;AACV,UAAME,GAAG,GAAGV,QAAQ,EAApB;AACA,UAAMY,IAAI,GAAGjB,MAAM,CAACe,GAAD,CAAnB;AACA,WAAOE,IAAP;AACH,GAJD,MAIO;AACH,WAAO,EAAP;AACH;AACJ,CARD,C,CAUA;;;AACA,MAAMC,MAAM,GAAG,MAAM;AACjBf,EAAAA,YAAY,CAACgB,UAAb,CAAwB,gBAAxB;AACH,CAFD;;AAIAC,MAAM,CAACC,IAAP,GAAc;AACVpB,EAAAA,QADU;AAEVe,EAAAA,OAFU;AAGVE,EAAAA;AAHU,CAAd","sourcesContent":["import decode from 'jwt-decode';\n\n// store jowtoken locally\nconst setToken = token => {\n    localStorage.setItem('store_token_id', token);\n}\n\n// Retrun the jwtoken from local storage\nconst getToken = () => (\n    localStorage.getItem('store_token_id')\n);\n\n// check if the token is expired\nconst isTokenExpired = token => {\n    try {\n        const _info = decode(token);\n        if (_info.exp < Date.now() / 1000) {\n            return true;\n        } else return false;\n    } catch (error) {\n        return false;\n    }\n}\n\n// check login status\nconst isLogin = () => {\n    var status = false;\n    const jwt = getToken();\n    if (jwt != null) {\n        if (!isTokenExpired(jwt)) status = true;\n    };\n    return status;\n}\n\n// return a list of all users\nconst getUser = () => {\n    if(isLogin()) {\n        const jwt = getToken();\n        const user = decode(jwt);\n        return user;\n    } else {\n        return {};\n    }\n}\n\n// remove the jwtoken stored locally\nconst logOut = () => {\n    localStorage.removeItem('store_token_id');\n}\n\nglobal.auth = {\n    setToken,\n    getUser,\n    logOut\n}"]},"metadata":{},"sourceType":"module"}