{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sean\\\\nodeProject\\\\CMPT276\\\\public\\\\src\\\\pages\\\\ResetPw.js\";\nimport React from 'react';\nimport { useForm } from 'react-hook-form';\nimport axios from 'commons/axios';\nimport { toast } from 'react-toastify';\nexport default function ResetPw(props) {\n  const {\n    register,\n    handleSubmit,\n    errors,\n    watch\n  } = useForm();\n\n  const submitHandler = async data => {\n    try {\n      const {\n        veri_code,\n        password\n      } = data; // post verfication code and new password to server side\n\n      const res = await axios.post('/auth/resetpw', {\n        veri_code,\n        password\n      }); // receive a jwtoken from server side if successful\n\n      const jwToken = res.data; // store the token locally\n\n      global.auth.setToken(jwToken); // route to the home page\n\n      props.history.push('/');\n      toast.success(\"Reset password successfully!\");\n    } catch (error) {\n      const message = error.response.data.message;\n      toast.error(message);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login_wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    action: \"\",\n    className: \"box login_box\",\n    onSubmit: handleSubmit(submitHandler),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 21\n    }\n  }, \"Verification Code\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: `input ${errors.veri_code && 'is-danger'}`,\n    placeholder: \"Verification Code\",\n    name: \"veri_code\",\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 25\n    }\n  }), errors.veri_code && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"helper has-text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 51\n    }\n  }, \"verification code is required\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 21\n    }\n  }, \"New Password\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: `input ${errors.password && 'is-danger'}`,\n    type: \"text\",\n    placeholder: \"Password\",\n    name: \"password\",\n    ref: register({\n      required: true,\n      minLength: {\n        value: 6,\n        message: 'cannot be less than 6 digits'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 25\n    }\n  }), errors.password && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"helper has-text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 46\n    }\n  }, errors.password.message))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: `input ${errors.password2 && 'is-danger'}`,\n    type: \"text\",\n    placeholder: \"Confirm Password\",\n    name: \"password2\",\n    ref: register({\n      required: true,\n      validate: value => value === watch('password')\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }), errors.password2 && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"helper has-text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 47\n    }\n  }, \"must match the qrevious entry\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button is-link login_button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, \"Submit\"))));\n}","map":{"version":3,"sources":["C:/Users/Sean/nodeProject/CMPT276/public/src/pages/ResetPw.js"],"names":["React","useForm","axios","toast","ResetPw","props","register","handleSubmit","errors","watch","submitHandler","data","veri_code","password","res","post","jwToken","global","auth","setToken","history","push","success","error","message","response","required","minLength","value","password2","validate"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport axios from 'commons/axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport default function ResetPw(props) {\r\n    const { register, handleSubmit, errors, watch } = useForm();\r\n\r\n    const submitHandler = async (data) => {\r\n        try {\r\n            const { veri_code, password } = data;\r\n            // post verfication code and new password to server side\r\n            const res = await axios.post('/auth/resetpw', { veri_code, password });\r\n            // receive a jwtoken from server side if successful\r\n            const jwToken = res.data;\r\n            // store the token locally\r\n            global.auth.setToken(jwToken);\r\n            // route to the home page\r\n            props.history.push('/');\r\n            toast.success(\"Reset password successfully!\")\r\n        } catch (error) {\r\n            const message = error.response.data.message;\r\n            toast.error(message);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"login_wrapper\">\r\n            <form action=\"\" className=\"box login_box\" onSubmit={ handleSubmit(submitHandler) }>\r\n                <div className=\"field\">\r\n                    <label className=\"label\">Verification Code</label>\r\n                    <div className=\"control\">  \r\n                        <input \r\n                        type=\"text\" \r\n                        className={`input ${errors.veri_code && 'is-danger'}`}\r\n                        placeholder=\"Verification Code\" \r\n                        name=\"veri_code\"\r\n                        ref={register({\r\n                            required: true,\r\n                            })} />\r\n                            { errors.veri_code && <p className=\"helper has-text-danger\">verification code is required</p >}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"field\">\r\n                    <label className=\"label\">New Password</label>\r\n                    <div className=\"control\">\r\n                        <input \r\n                        className={`input ${errors.password && 'is-danger'}`}\r\n                        type=\"text\" \r\n                        placeholder=\"Password\" \r\n                        name='password'     \r\n                        ref={ register({ \r\n                            required: true,\r\n                            minLength: {\r\n                                value: 6,\r\n                                message: 'cannot be less than 6 digits'\r\n                            }}) } />\r\n                        { errors.password && <p className=\"helper has-text-danger\">{ errors.password.message }</p> } \r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"field\">\r\n                    <label className=\"label\">Confirm Password</label>\r\n                    <div className=\"control\">\r\n                        <input \r\n                        className={`input ${errors.password2 && 'is-danger'}`}  \r\n                        type=\"text\" \r\n                        placeholder=\"Confirm Password\" \r\n                        name='password2'     \r\n                        ref={ register({       \r\n                            required: true,\r\n                            validate: (value) => value === watch('password')\r\n                            }) }  />   \r\n                        { errors.password2 && <p className=\"helper has-text-danger\">must match the qrevious entry</p> }  \r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"control\">\r\n                    <button className=\"button is-link login_button\">Submit</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}