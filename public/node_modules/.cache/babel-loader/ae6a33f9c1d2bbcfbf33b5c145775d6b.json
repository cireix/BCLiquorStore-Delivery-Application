{"ast":null,"code":"import _regeneratorRuntime from\"/home/eric/Desktop/CMPT276/CMPT276/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/eric/Desktop/CMPT276/CMPT276/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{useForm}from'react-hook-form';import axios from'commons/axios';import{toast}from'react-toastify';export default function ResetPw(props){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors,watch=_useForm.watch;var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var veri_code,password,res,jwToken;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;veri_code=data.veri_code,password=data.password;// post verfication code and new password to server side\n_context.next=4;return axios.post('/auth/resetpw',{veri_code:veri_code,password:password});case 4:res=_context.sent;// receive a jwtoken from server side if successful\njwToken=res.data;// store the token locally\nglobal.auth.setToken(jwToken);// route to the home page\nprops.history.push('/');toast.success(\"Reset password successfully!\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"login_wrapper\"},/*#__PURE__*/React.createElement(\"form\",{action:\"\",className:\"box login_box\",onSubmit:handleSubmit(submitHandler)},/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label\"},\"Verification Code\"),/*#__PURE__*/React.createElement(\"div\",{className:\"control\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"input \".concat(errors.veri_code&&'is-danger'),placeholder:\"Verification Code\",name:\"veri_code\",ref:register({required:true})}),errors.veri_code&&/*#__PURE__*/React.createElement(\"p\",{className:\"helper has-text-danger\"},\"verification code is required\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label\"},\"New Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"control\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input \".concat(errors.password&&'is-danger'),type:\"text\",placeholder:\"Password\",name:\"password\",ref:register({required:true,minLength:{value:6,message:'cannot be less than 6 digits'}})}),errors.password&&/*#__PURE__*/React.createElement(\"p\",{className:\"helper has-text-danger\"},errors.password.message))),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label\"},\"Confirm Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"control\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input \".concat(errors.password2&&'is-danger'),type:\"text\",placeholder:\"Confirm Password\",name:\"password2\",ref:register({required:true,validate:function validate(value){return value===watch('password');}})}),errors.password2&&/*#__PURE__*/React.createElement(\"p\",{className:\"helper has-text-danger\"},\"must match the qrevious entry\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button is-link login_button\"},\"Submit\"))));}","map":{"version":3,"sources":["/home/eric/Desktop/CMPT276/CMPT276/client/src/pages/ResetPw.js"],"names":["React","useForm","axios","toast","ResetPw","props","register","handleSubmit","errors","watch","submitHandler","data","veri_code","password","post","res","jwToken","global","auth","setToken","history","push","success","console","log","required","minLength","value","message","password2","validate"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport axios from 'commons/axios';\nimport { toast } from 'react-toastify';\n\nexport default function ResetPw(props) {\n    const { register, handleSubmit, errors, watch } = useForm();\n\n    const submitHandler = async (data) => {\n        try {\n            const { veri_code, password } = data;\n            // post verfication code and new password to server side\n            const res = await axios.post('/auth/resetpw', { veri_code, password });\n            // receive a jwtoken from server side if successful\n            const jwToken = res.data;\n            // store the token locally\n            global.auth.setToken(jwToken);\n            // route to the home page\n            props.history.push('/');\n            toast.success(\"Reset password successfully!\")\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    return (\n        <div className=\"login_wrapper\">\n            <form action=\"\" className=\"box login_box\" onSubmit={ handleSubmit(submitHandler) }>\n                <div className=\"field\">\n                    <label className=\"label\">Verification Code</label>\n                    <div className=\"control\">  \n                        <input \n                        type=\"text\" \n                        className={`input ${errors.veri_code && 'is-danger'}`}\n                        placeholder=\"Verification Code\" \n                        name=\"veri_code\"\n                        ref={register({\n                            required: true,\n                            })} />\n                            { errors.veri_code && <p className=\"helper has-text-danger\">verification code is required</p >}\n                    </div>\n                </div>\n\n                <div className=\"field\">\n                    <label className=\"label\">New Password</label>\n                    <div className=\"control\">\n                        <input \n                        className={`input ${errors.password && 'is-danger'}`}\n                        type=\"text\" \n                        placeholder=\"Password\" \n                        name='password'     \n                        ref={ register({ \n                            required: true,\n                            minLength: {\n                                value: 6,\n                                message: 'cannot be less than 6 digits'\n                            }}) } />\n                        { errors.password && <p className=\"helper has-text-danger\">{ errors.password.message }</p> } \n                    </div>\n                </div>\n\n                <div className=\"field\">\n                    <label className=\"label\">Confirm Password</label>\n                    <div className=\"control\">\n                        <input \n                        className={`input ${errors.password2 && 'is-danger'}`}  \n                        type=\"text\" \n                        placeholder=\"Confirm Password\" \n                        name='password2'     \n                        ref={ register({       \n                            required: true,\n                            validate: (value) => value === watch('password')\n                            }) }  />   \n                        { errors.password2 && <p className=\"helper has-text-danger\">must match the qrevious entry</p> }  \n                    </div>\n                </div>\n\n                <div className=\"control\">\n                    <button className=\"button is-link login_button\">Submit</button>\n                </div>\n            </form>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}