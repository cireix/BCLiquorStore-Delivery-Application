(this.webpackJsonp276_project=this.webpackJsonp276_project||[]).push([[0],{36:function(e,a,t){"use strict";(function(e){var n=t(0),r=t.n(n),s=t(43),l=t(44);a.a=function(a){var t=e.auth.getUser();return r.a.createElement("div",{className:"main"},r.a.createElement(s.a,{user:t}),r.a.createElement(l.a,null))}}).call(this,t(15))},37:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return s}));var n=t(0),r=t.n(n);function s(a){return r.a.createElement("div",{className:"user-profile"},r.a.createElement("p",{className:"title has-text-centered"},"User Profile"),r.a.createElement("fieldset",{disabled:!0},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",defaultValue:a.user.nickname}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Phone Number"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",defaultValue:a.user.phoneNumber}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Type"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",defaultValue:1===a.user.type?"Admin":[2===a.user.type?"Driver":"General User"]})))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"field is-grouped is-grouped-centered"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-danger",onClick:function(){e.auth.logOut(),a.close("logout")}},"Logout")),1===a.user.type?r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",onClick:function(){a.close("allusers")}},"All Users")):null))}}).call(this,t(15))},39:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return h}));var n=t(1),r=t.n(n),s=t(3),l=t(0),c=t.n(l),o=t(14),i=t(12),m=t(9),u=t(11),d=t(17),p=t.n(d);function h(a){var t=Object(o.a)(),n=t.register,l=t.handleSubmit,d=t.errors,h=function(){var t=Object(s.a)(r.a.mark((function t(n){var s,l,c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=n.phoneNumber,l=n.password,t.next=4,m.a.post("/api/users/login",{phone:s,password:l});case 4:c=t.sent,o=c.data.token.replace("Bearer ",""),console.log(p()(o)),e.auth.setToken(o),a.history.push("/"),u.b.success("Login successful!"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),u.b.error("Invalid phone number or password");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"login_wrapper"},c.a.createElement("form",{action:"",className:"box login_box",onSubmit:l(h)},c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Phone Number"),c.a.createElement("div",{class:"field-body"},c.a.createElement("div",{class:"field is-expanded"},c.a.createElement("div",{class:"field has-addons"},c.a.createElement("p",{class:"control"},c.a.createElement("p",{class:"button is-static"},"+1")),c.a.createElement("input",{type:"text",className:"input ".concat(d.phoneNumber&&"is-danger"),placeholder:"Phone number",name:"phoneNumber",ref:n({required:!0,pattern:{value:/^\(?([0-9]{3})\)?[-.\u25cf]?([0-9]{3})[-.\u25cf]?([0-9]{4})$/,message:"invalid phone number"}})})),d.phoneNumber&&c.a.createElement("p",{className:"helper has-text-danger"},d.phoneNumber.message)))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Password"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{type:"text",className:"input ".concat(d.password&&"is-danger"),placeholder:"Password",name:"password",ref:n({required:!0,minLength:{value:6,message:"cannot be less then 6 digits"}})}),d.password&&c.a.createElement("p",{className:"helper has-text-danger"},d.password.message),c.a.createElement(i.b,{to:"/forgotpw",className:"has-text-danger forgotpw"},"forgot password?"))),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-link login_button"},"Login"))))}}).call(this,t(15))},41:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return p}));var n=t(1),r=t.n(n),s=t(3),l=t(0),c=t.n(l),o=t(14),i=t(9),m=t(11),u=t(17),d=t.n(u);function p(a){var t=Object(o.a)(),n=t.register,l=t.handleSubmit,u=t.errors,p=t.watch,h=function(){var t=Object(s.a)(r.a.mark((function t(n){var s,l,c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=n.phoneNumber,l=n.code,t.next=4,i.a.post("/api/users/register2",{phone:s,code:l});case 4:c=t.sent,o=c.data.token.replace("Bearer ",""),console.log(d()(o)),e.auth.setToken(o),a.history.push("/"),m.b.success("Sign up successfully!"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),m.b.error("This phone number already exists");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"login_wrapper"},c.a.createElement("form",{className:"box login_box"},c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Name"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input ".concat(u.nickname&&"is-danger"),type:"text",placeholder:"Nickname",name:"nickname",ref:n({required:!0,maxLength:{value:10,message:"cannot be more than 10 digits"}})}),u.nickname&&c.a.createElement("p",{className:"helper has-text-danger"},u.nickname.message))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Phone Number"),c.a.createElement("div",{class:"field-body"},c.a.createElement("div",{class:"field is-expanded"},c.a.createElement("div",{class:"field has-addons"},c.a.createElement("p",{class:"control"},c.a.createElement("p",{class:"button is-static"},"+1")),c.a.createElement("input",{type:"text",className:"input ".concat(u.phoneNumber&&"is-danger"),placeholder:"Phone number",name:"phoneNumber",ref:n({required:!0,pattern:{value:/^\(?([0-9]{3})\)?[-.\u25cf]?([0-9]{3})[-.\u25cf]?([0-9]{4})$/,message:"invalid phone number"}})})),u.phoneNumber&&c.a.createElement("p",{className:"helper has-text-danger"},u.phoneNumber.message)))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Password"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input ".concat(u.password&&"is-danger"),type:"text",placeholder:"Password",name:"password",ref:n({required:!0,minLength:{value:6,message:"cannot be less than 6 digits"}})}),u.password&&c.a.createElement("p",{className:"helper has-text-danger"},u.password.message))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Confirm Password"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input ".concat(u.password2&&"is-danger"),type:"text",placeholder:"Confirm Password",name:"password2",ref:n({required:!0,validate:function(e){return e===p("password")}})}),u.password2&&c.a.createElement("p",{className:"helper has-text-danger"},"must match the qrevious entry"))),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-link login_button",onClick:l((function(e){var a=e.nickname,t=e.phoneNumber,n=e.password;i.a.post("/api/users/register",{name:a,phone:t,password:n,password2:n,type:1}).then((function(e){console.log("res=>",e)})).catch((function(e){return console.log(e)}))}))},"Get Authentication Code")),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Authentication Code"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input ".concat(u.code&&"is-danger"),type:"number",placeholder:"Authentication Code",name:"code",ref:n({maxLength:{value:6,message:"should be 6 digits"}})}),u.code&&c.a.createElement("p",{className:"helper has-text-danger"},u.code.message))),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-link login_button",onClick:l(h)},"Submit"))))}}).call(this,t(15))},42:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return u}));var n=t(1),r=t.n(n),s=t(3),l=t(0),c=t.n(l),o=t(14),i=t(9),m=t(11);function u(a){var t=Object(o.a)(),n=t.register,l=t.handleSubmit,u=t.errors,d=t.watch,p=function(){var t=Object(s.a)(r.a.mark((function t(n){var s,l,c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=n.veri_code,l=n.password,t.next=4,i.a.post("/auth/resetpw",{veri_code:s,password:l});case 4:c=t.sent,o=c.data,e.auth.setToken(o),a.history.push("/"),m.b.success("Reset password successfully!"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"login_wrapper"},c.a.createElement("form",{action:"",className:"box login_box",onSubmit:l(p)},c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Verification Code"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{type:"text",className:"input ".concat(u.veri_code&&"is-danger"),placeholder:"Verification Code",name:"veri_code",ref:n({required:!0})}),u.veri_code&&c.a.createElement("p",{className:"helper has-text-danger"},"verification code is required"))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"New Password"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input ".concat(u.password&&"is-danger"),type:"text",placeholder:"Password",name:"password",ref:n({required:!0,minLength:{value:6,message:"cannot be less than 6 digits"}})}),u.password&&c.a.createElement("p",{className:"helper has-text-danger"},u.password.message))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Confirm Password"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{className:"input ".concat(u.password2&&"is-danger"),type:"text",placeholder:"Confirm Password",name:"password2",ref:n({required:!0,validate:function(e){return e===d("password")}})}),u.password2&&c.a.createElement("p",{className:"helper has-text-danger"},"must match the qrevious entry"))),c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-link login_button"},"Submit"))))}}).call(this,t(15))},43:function(e,a,t){"use strict";var n=t(0),r=t.n(n),s=t(12),l=t(2),c=t(18),o=t(19),i=t(21),m=t(20),u=t(10),d=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={component:null,active:!1,callback:function(){}},e.open=function(a){var t=a.component,n=a.callback,s=a.user,l=(new Date).getTime(),c=r.a.createElement(t,{close:e.close,key:l,user:s});e.setState({component:c,active:!0,callback:n})},e.close=function(a){e.setState({active:!1}),e.state.callback(a)},e}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:{true:"panel-wrapper active",false:"panel-wrapper"}[this.state.active]},r.a.createElement("div",{className:"over-layer",onClick:this.close}),r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-head"},r.a.createElement("i",{className:"far fa-times-circle close",onClick:this.close})),r.a.createElement("div",{className:"panel-body"},this.state.component)))}}]),t}(r.a.Component),p=document.createElement("div");document.body.appendChild(p);var h=Object(u.render)(r.a.createElement(d,null),p),E=t(37);a.a=Object(l.f)((function(e){var a=function(){h.open({component:E.a,user:e.user,callback:function(a){"logout"===a&&e.history.go(0),"allusers"===a&&e.history.push("/admin/allusers")}})};return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"grid"},r.a.createElement("div",{className:"start"},r.a.createElement(s.b,{to:"/"},"HOME")),r.a.createElement("div",{className:"end"},e.user.nickname?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"far fa-user icon",onClick:a}),r.a.createElement("span",{className:"nickname",onClick:a},e.user.nickname)):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"/login"},"LOGIN"),r.a.createElement(s.b,{to:"/signup"},"SIGN UP")))))}))},44:function(e,a,t){"use strict";var n=t(18),r=t(19),s=t(21),l=t(20),c=t(0),o=t.n(c),i=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"tool-box"},o.a.createElement("div",{className:"logo-text"},"STORE"),o.a.createElement("div",{className:"search-box"},o.a.createElement("div",{className:"field has-addons"},o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input search-input",type:"text",placeholder:"Search Product"})),o.a.createElement("div",{className:"control"},o.a.createElement("button",{className:"button is-static"},"X")))),o.a.createElement("div",{className:"cart-box"},o.a.createElement("i",{className:"fas fa-shopping-cart"}),o.a.createElement("span",{className:"cart-num"},"(0)")))}}]),t}(c.Component),m=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(i,null),o.a.createElement("div",{className:"products"}))}}]),t}(c.Component);a.a=m},45:function(e,a,t){e.exports=t(76)},74:function(e,a,t){},75:function(e,a,t){"use strict";(function(e){var a=t(17),n=t.n(a),r=function(){return localStorage.getItem("store_token_id")},s=function(){var e=!1,a=r();return null!=a&&(function(e){try{return n()(e).exp<Date.now()/1e3}catch(a){return!1}}(a)||(e=!0)),e};e.auth={setToken:function(e){localStorage.setItem("store_token_id",e)},getUser:function(){if(s()){var e=r();return n()(e)}return{}},logOut:function(){localStorage.removeItem("store_token_id")}}}).call(this,t(15))},76:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(10),l=t.n(s),c=t(12),o=t(2),i=t(36),m=t(39),u=t(41),d=t(1),p=t.n(d),h=t(3),E=t(14),b=t(9);function f(e){var a=Object(E.a)(),t=a.register,n=a.handleSubmit,s=a.errors,l=function(){var a=Object(h.a)(p.a.mark((function a(t){var n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=t.phoneNumber,a.next=4,b.a.post("/auth/forgotpw",{phoneNumber:n});case 4:a.sent,e.history.push("/resetpw"),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"login_wrapper"},r.a.createElement("form",{action:"",className:"box login_box",onSubmit:n(l)},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Phone Number"),r.a.createElement("div",{class:"field-body"},r.a.createElement("div",{class:"field is-expanded"},r.a.createElement("div",{class:"field has-addons"},r.a.createElement("p",{class:"control"},r.a.createElement("p",{class:"button is-static"},"+1")),r.a.createElement("input",{type:"text",className:"input ".concat(s.phoneNumber&&"is-danger"),placeholder:"Enter your phone number",name:"phoneNumber",ref:t({required:!0,pattern:{value:/^\(?([0-9]{3})\)?[-.\u25cf]?([0-9]{3})[-.\u25cf]?([0-9]{4})$/,message:"invalid phone number"}})})),s.phoneNumber&&r.a.createElement("p",{className:"helper has-text-danger"},s.phoneNumber.message)))),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link login_button"},"Submit"))))}var v=t(42),N=function(e){var a=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/db/users");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();return r.a.createElement("div",{className:"allusers"},r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,["id","nickname","phone number","password","type"].map((function(e){return r.a.createElement("th",null,e)})))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",null,e.map((function(e){return r.a.createElement("td",null,"1"===e?"Admin":["2"===e?"Driver":["0"===e?"General User":e]])})))})))))},g=function(){return r.a.createElement(c.a,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",exact:!0,component:i.a}),r.a.createElement(o.a,{path:"/login",component:m.a}),r.a.createElement(o.a,{path:"/signup",component:u.a}),r.a.createElement(o.a,{path:"/forgotpw",component:f}),r.a.createElement(o.a,{path:"/resetpw",component:v.a}),r.a.createElement(o.a,{path:"/admin/allusers",component:N})))},w=(t(74),t(75),t(11));l.a.render(r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(w.a,null)),document.getElementById("root"))},9:function(e,a,t){"use strict";var n=t(40),r=t.n(n).a.create({baseURL:"http://localhost:5000",timeout:1e3});a.a=r}},[[45,1,2]]]);
//# sourceMappingURL=main.6e10856f.chunk.js.map